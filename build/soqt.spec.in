# FIXME: this file has not been kept up-to-date and is now not
# correctly reflecting the set of files which should be made part
# of an RPM file. 20011207 mortene.

# Spec file for constructing installation package in RPM format.
# Quick instructions (these are similar to instructions found in
# the simage.spec.in and coin.spec.in files):
#
#   * run configure with the "--prefix" option set to the final
#     installation directory (or leave out to default to /usr/local/)
#
#   * copy the top_builddir/build/soqt.spec file to the
#     /usr/src/redhat/SPECS directory (on RedHat Linux, may differ
#     on other system (on Mandrake, for instance, you should swap
#     /usr/src/redhat/ with /usr/src/RPM))
#
#   * "cd /usr/src/redhat/SPECS", "rpm -bb soqt.spec"
#
# There should now be a file SoQt-something.rpm below
# /usr/src/redhat/RPMS.
#
#                                                    20000705 mortene.

Summary: Qt GUI widgets for Coin / Open Inventor.
Name: SoQt
Version: @VERSION@
Release: @soqt_configure_date@
Copyright: Lesser General Public License (LGPL)
Group: Development/Libraries
URL: http://www.coin3d.org/
Vendor: Systems in Motion
Packager: Morten Eriksen <mortene@sim.no>

%description

Qt GUI widgets for Coin. The components are also compatible with Open
Inventor, and the API is (somewhat loosely) based on the API of the
Xt/Motif toolkit which comes with Open Inventor.

The library is released publicly under the Q Public License for
developers of free software and is also available for commercial use
under a "professional edition" license.

SoQt is supported on both UNIX and Win32 platforms.


%prep
cd $RPM_SOURCE_DIR
export CVSROOT=:pserver:cvs@cvs.sim.no:/export/cvsroot
if test ! -d SoQt; then
  cvs checkout -P SoQt
else
  cvs update -dP SoQt
fi


%build

cd $RPM_BUILD_DIR
test -d SoQt || mkdir SoQt
cd SoQt
# Errors might go unnoticed if configuration info is taken from
# an old cache.
rm -f ./config.cache
# The options must cover the set of install-directories in the %files section.
$RPM_SOURCE_DIR/SoQt/configure --without-examples \
                       --bindir=@bindir@ --includedir=@includedir@ \
                       --libdir=@libdir@ --datadir=@datadir@
make


%install

cd $RPM_BUILD_DIR/SoQt
make install-strip
# FIXME: for some unknown reason, the lib-file is not automatically
# stripped, so we use this hack. 20000705 mortene.
strip @libdir@/libSoQt.so.1.0.0


%files

@bindir@/soqt-config
@datadir@/aclocal/soqt.m4
@includedir@/Inventor/Qt/SoQt.h
@includedir@/Inventor/Qt/SoQtBasic.h
@includedir@/Inventor/Qt/SoQtObject.h
@includedir@/Inventor/Qt/SoQtComponent.h
@includedir@/Inventor/Qt/SoQtCursors.h
@includedir@/Inventor/Qt/SoQtGLWidget.h
@includedir@/Inventor/Qt/SoQtLightSliderSet.h
@includedir@/Inventor/Qt/SoQtMaterialSliderSet.h
@includedir@/Inventor/Qt/SoQtRenderArea.h
@includedir@/Inventor/Qt/SoQtSliderSet.h
@includedir@/Inventor/Qt/SoQtSliderSetBase.h
@includedir@/Inventor/Qt/SoQtTransformSliderSet.h
@includedir@/Inventor/Qt/devices/SoQtDevice.h
@includedir@/Inventor/Qt/devices/SoQtInputFocus.h
@includedir@/Inventor/Qt/devices/SoQtKeyboard.h
@includedir@/Inventor/Qt/devices/SoQtLinuxJoystick.h
@includedir@/Inventor/Qt/devices/SoQtMouse.h
@includedir@/Inventor/Qt/devices/SoQtSpaceball.h
@includedir@/Inventor/Qt/viewers/SoQtConstrainedViewer.h
@includedir@/Inventor/Qt/viewers/SoQtExaminerViewer.h
@includedir@/Inventor/Qt/viewers/SoQtFlyViewer.h
@includedir@/Inventor/Qt/viewers/SoQtFullViewer.h
@includedir@/Inventor/Qt/viewers/SoQtPlaneViewer.h
@includedir@/Inventor/Qt/viewers/SoQtViewer.h
@includedir@/Inventor/Qt/viewers/SoQtWalkViewer.h
@libdir@/libSoQt.so.1
@libdir@/libSoQt.so.1.0.0
@libdir@/libSoQt.la
@libdir@/libSoQt.so


%clean

cd $RPM_BUILD_DIR/SoQt
make uninstall
